<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- CSS 초기화   -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">

    <!-- 부트스트랩   -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <!-- CSS 파일 가져오기    -->
    <!--    <link rel="stylesheet" href="../static/styles/main.css">-->
    <link rel="stylesheet" href="../static/styles/global.css">

    <!-- JS 파일 가져오기   -->
    <script src="../static/js/load.js"></script>


    <!-- 머티리얼 아이콘을 위한 CDN 설치   -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <title>YouTuverse</title>


    <script>
        function like_youtube() {
            $.ajax({
                type: 'POST',
                url: '/api/like',
                data: {
                    'name_give': "{{ keyword }}"
                },
                success: function (response) {
                    console.log(response)
                    alert(response['msg']);
                    window.location.reload();
                }
            });
        }
        
        $(document).ready(function () {
            $(window).scroll(function () {
                // top button controll
                if ($(this).scrollTop() > 100) {
                    $('#up-btn').fadeIn();
                } else {
                    $('#up-btn').fadeOut();
                }
            });

            // 위로 올라가기 버튼
            $("#up-btn").click(function () {
                $('html, body').animate({scrollTop: 0}, '300');
            });

        });

    </script>

</head>
<body>
<!--Header-->
<header>
    <div class="inner">
        <a href="/" class="title">
            <div class="title">YouTuverse</div>
        </a>
        <ul class="menu">
            <li>
                <div class="search">
                    <input type="text" placeholder="검색할 유튜버 입력하세요.">
                    <div class="material-icons">search</div>
                </div>
            </li>
            <li>
                <a href="#">유튜버 추가</a>
            </li>
            {% if user %}
                <span>안녕하세요 {{ user['nickname'] }}님!</span>
                <li id="logoutBtn">
                    로그아웃
                </li>
            {% else %}
                <li>
                    <a href="/login">로그인</a>
                </li>
                <li>
                    <a href="/signup">회원가입</a>
                </li>
            {% endif %}
        </ul>
    </div>
</header>
<div class="wrap">
  <div class="container">
      <div class="d-flex justify-content-between align-items-end">
          {% for youtuber in youtubers %}
              {% if keyword == youtuber.name %}
                  <div class="d-flex justify-content-between align-items-end">
                      <div class="media">
                          <div class="media-left">
                              <figure>
                                  <img class="image" src="{{ youtuber.photoURL }}" alt="Placeholder image"/>
                              </figure>
                          </div>
                          <div class="media-content">
                              <p class="font1">{{ youtuber.name }}</p>
                              <p class="font2">{{ youtuber.desc }}</p>
                              <p class="font2">{{ youtuber.subscribers }}</p>
                              <a href="{{ youtuber.thumbnail_video }}">최근영상 보러가기</a>
                          </div>
                      </div>
                  </div>
                  <div>
                      <button id="button" onclick="like_youtube()" type="button" class="btn btn-light">
                          좋아요:{{ youtuber.like }}명
                      </button>
                  </div>
              {% endif %}
          {% endfor %}
      </div>
  </div>
</div>
<!-- 메인 페이지 -->
<!-- <div class="inner"> -->
    <!-- <h1>디테일 페이지</h1> -->
    <!-- <div id="data"> -->
    <!--위로가기-->
    <!-- <img id="up-btn" src="../static/images/up-icon.png" alt="up-icon"> -->
<!-- </div> -->

<script src="../static/js/login.js"></script>
</body>
</html>